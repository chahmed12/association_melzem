<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø§Ø¨Ø·Ø© Ø§Ù„Ø·Ù„ÙŠØ¹Ø© Ø§Ù„Ø´Ø¨Ø§Ø¨ÙŠØ© Ù„Ø¨Ù„Ø¯ÙŠØ© Ù…Ù„Ø²Ù… ØªÙŠØ´Ø·</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --green:#1a5c38; --green-light:#2e8b57; --green-soft:#e8f5ee; --gold:#c9a84c; --gold-light:#f0d080; --dark:#0d1f13; --white:#f8fdf9; }
        * { box-sizing:border-box; margin:0; padding:0; }
        body { font-family:'Cairo',sans-serif; background:var(--dark); color:var(--white); min-height:100vh; overflow-x:hidden; }
        body::before { content:''; position:fixed; inset:0; background:radial-gradient(ellipse at 20% 50%,rgba(46,139,87,.15) 0%,transparent 60%),radial-gradient(ellipse at 80% 20%,rgba(201,168,76,.08) 0%,transparent 50%),radial-gradient(ellipse at 60% 80%,rgba(26,92,56,.2) 0%,transparent 50%); pointer-events:none; z-index:0; }
        .ornament-top { position:relative; z-index:1; width:100%; height:8px; background:linear-gradient(90deg,var(--green),var(--gold),var(--green-light),var(--gold),var(--green)); }
        .hero { position:relative; z-index:1; text-align:center; padding:3rem 1rem 2rem; }
        .logo-ring { width:110px; height:110px; border-radius:50%; margin:0 auto 1.5rem; background:linear-gradient(135deg,var(--green-light),var(--green)); border:3px solid var(--gold); display:flex; align-items:center; justify-content:center; font-size:3rem; box-shadow:0 0 40px rgba(46,139,87,.4),0 0 80px rgba(201,168,76,.15); animation:pulse-ring 3s ease-in-out infinite; }
        @keyframes pulse-ring { 0%,100%{box-shadow:0 0 40px rgba(46,139,87,.4),0 0 80px rgba(201,168,76,.15)} 50%{box-shadow:0 0 60px rgba(46,139,87,.6),0 0 100px rgba(201,168,76,.25)} }
        .hero-title { font-family:'Amiri',serif; font-size:clamp(1.6rem,5vw,2.8rem); font-weight:700; color:var(--white); line-height:1.4; margin-bottom:.5rem; text-shadow:0 2px 20px rgba(0,0,0,.5); }
        .hero-subtitle { font-size:.95rem; color:var(--gold-light); letter-spacing:.05em; }
        .hero-divider { width:120px; height:2px; background:linear-gradient(90deg,transparent,var(--gold),transparent); margin:1.5rem auto; }
        .topbar { position:relative; z-index:2; display:flex; justify-content:flex-end; padding:.75rem 1.25rem 0; }
        .stats-bar { position:relative; z-index:1; display:flex; justify-content:center; gap:1rem; flex-wrap:wrap; padding:0 1rem 2rem; }
        .stat-item { background:rgba(255,255,255,.05); border:1px solid rgba(201,168,76,.2); border-radius:12px; padding:.75rem 1.5rem; text-align:center; min-width:100px; backdrop-filter:blur(10px); }
        .stat-num { font-size:1.5rem; font-weight:900; color:var(--gold-light); display:block; }
        .stat-label { font-size:.7rem; color:rgba(255,255,255,.6); display:block; }
        .cards-section { position:relative; z-index:1; max-width:900px; margin:0 auto; padding:0 1rem 4rem; }
        .section-title { text-align:center; font-size:1rem; color:rgba(255,255,255,.5); text-transform:uppercase; letter-spacing:.15em; margin-bottom:1.5rem; }
        .cards-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem; }
        .card { position:relative; border-radius:16px; overflow:hidden; text-decoration:none; display:block; transition:transform .3s ease,box-shadow .3s ease; }
        .card:hover { transform:translateY(-4px); }
        .card-inner { padding:2rem 1.5rem; height:100%; display:flex; flex-direction:column; align-items:center; text-align:center; gap:.75rem; }
        .card-icon { font-size:2.5rem; display:block; margin-bottom:.25rem; }
        .card-title { font-size:1.15rem; font-weight:700; color:white; }
        .card-desc { font-size:.8rem; opacity:.75; line-height:1.6; color:white; }
        .card-green { background:linear-gradient(135deg,#1a5c38,#2e8b57); border:1px solid rgba(46,139,87,.6); box-shadow:0 8px 32px rgba(26,92,56,.4); }
        .card-green:hover { box-shadow:0 16px 48px rgba(26,92,56,.6); }
        .card-gold { background:linear-gradient(135deg,#7a5c1e,#c9a84c); border:1px solid rgba(201,168,76,.6); box-shadow:0 8px 32px rgba(122,92,30,.4); }
        .card-gold:hover { box-shadow:0 16px 48px rgba(201,168,76,.4); }
        .card-teal { background:linear-gradient(135deg,#0f4c5c,#1a8fa0); border:1px solid rgba(26,143,160,.6); box-shadow:0 8px 32px rgba(15,76,92,.4); }
        .card-purple { background:linear-gradient(135deg,#3d1a5c,#7c3aed); border:1px solid rgba(124,58,237,.5); box-shadow:0 8px 32px rgba(61,26,92,.4); }
        .badge-admin { position:absolute; top:12px; left:12px; background:var(--gold); color:var(--dark); font-size:.65rem; font-weight:900; padding:2px 8px; border-radius:20px; }
        footer { position:relative; z-index:1; text-align:center; padding:1.5rem; border-top:1px solid rgba(255,255,255,.08); color:rgba(255,255,255,.35); font-size:.75rem; }
        @media(max-width:600px) { .hero{padding:2rem 1rem 1.5rem} .logo-ring{width:85px;height:85px;font-size:2.2rem} }
    </style>
</head>
<body>
<div class="ornament-top"></div>

<div class="topbar" id="topbar"></div>

<div class="hero">
    <div class="logo-ring">ðŸŒ¿</div>
    <h1 class="hero-title" id="heroTitle"></h1>
    <p class="hero-subtitle" id="heroSubtitle"></p>
    <div class="hero-divider"></div>
</div>

<div class="stats-bar">
    <div class="stat-item"><span class="stat-num" id="statHommes">â€”</span><span class="stat-label" id="lblH"></span></div>
    <div class="stat-item"><span class="stat-num" id="statFemmes">â€”</span><span class="stat-label" id="lblF"></span></div>
    <div class="stat-item"><span class="stat-num" id="statTotal">â€”</span><span class="stat-label" id="lblT"></span></div>
</div>

<div class="cards-section">
    <p class="section-title" id="sectionTitle"></p>
    <div class="cards-grid">
        <a href="/inscription-hommes.html" class="card card-green">
            <div class="card-inner">
                <span class="card-icon">ðŸ‘¨</span>
                <span class="card-title" id="c1t"></span>
                <span class="card-desc" id="c1d"></span>
            </div>
        </a>
        <a href="/inscription-femmes.html" class="card card-gold">
            <div class="card-inner">
                <span class="card-icon">ðŸ‘©</span>
                <span class="card-title" id="c2t"></span>
                <span class="card-desc" id="c2d"></span>
            </div>
        </a>
        <a href="/liste-membres.html" class="card card-teal">
            <div class="card-inner">
                <span class="card-icon">ðŸ“Š</span>
                <span class="card-title" id="c3t"></span>
                <span class="card-desc" id="c3d"></span>
            </div>
        </a>
    </div>
</div>

<footer id="footer"></footer>

<script src="/lang.js"></script>
<script>

    // â”€â”€ 1. Injecter le bouton dans le DOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('topbar').innerHTML = getLangBtnHTML('dark');

    // â”€â”€ 2. updateLangBtn() APRÃˆS injection â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    updateLangBtn();

    // â”€â”€ 3. Appliquer toutes les traductions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function applyLang() {
        document.documentElement.lang = currentLang;
        document.documentElement.dir  = currentLang === 'ar' ? 'rtl' : 'ltr';

        document.getElementById('heroTitle').textContent    = t('app.title');
        document.getElementById('heroSubtitle').textContent = t('app.subtitle');
        document.getElementById('sectionTitle').textContent = t('app.services');
        document.getElementById('lblH').textContent         = t('stat.hommes');
        document.getElementById('lblF').textContent         = t('stat.femmes');
        document.getElementById('lblT').textContent         = t('stat.total');
        document.getElementById('c1t').textContent          = t('card.inscH.title');
        document.getElementById('c1d').textContent          = t('card.inscH.desc');
        document.getElementById('c2t').textContent          = t('card.inscF.title');
        document.getElementById('c2d').textContent          = t('card.inscF.desc');
        document.getElementById('c3t').textContent          = t('card.list.title');
        document.getElementById('c3d').textContent          = t('card.list.desc');
        document.getElementById('footer').textContent       = t('footer');

        // Mettre Ã  jour le bouton de langue aprÃ¨s chaque changement
        updateLangBtn();
    }

    // â”€â”€ 4. Premier rendu â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    applyLang();

    // â”€â”€ 5. Charger les stats depuis l'API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    async function loadStats() {
        try {
            const [r1, r2] = await Promise.all([
                fetch('/api/membreMelzem'),
                fetch('/api/femmesMelzem')
            ]);
            const d1 = await r1.json(), d2 = await r2.json();
            const h = d1.membreMelzem?.length || 0;
            const f = d2.femmesMelzem?.length || 0;  // â† corrigÃ© : Ã©tait d2.femmes
            document.getElementById('statHommes').textContent = h;
            document.getElementById('statFemmes').textContent = f;
            document.getElementById('statTotal').textContent  = h + f;
        } catch {
            ['statHommes','statFemmes','statTotal'].forEach(id =>
                document.getElementById(id).textContent = '?'
            );
        }
    }
    loadStats();

</script>
</body>
</html>